<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="JSON Path Online Test Site">
    <title>JSON Path Test</title>
    <script type="text/javascript">
        if (typeof JSON === 'undefined') {
            document.write('<sc' + 'ript type="text/javascript" src="js/json2.js"></sc' + 'ript>');
        }
    </script>
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
    <link href="css/lumen.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/jquery-linedtextarea.css" type="text/css" rel="stylesheet">
    <script src="js/jsonpath.js" type="text/javascript"></script>
    <script src="js/dump.js" type="text/javascript"></script>
    <script src="js/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="js/jquery.textchange.min.js" type="text/javascript"></script>
    <script src="js/jquery-linedtextarea.js" type="text/javascript"></script>
    <script src="js/jsl.parser.js" type="text/javascript"></script>
    <script src="js/jsl.format.js" type="text/javascript"></script>
    <script src="js/jsl.interactions.js" type="text/javascript"></script>
</head>

<body>
    <a href="https://github.com/nrpatten/node-jsonpath-site"><img style="position: absolute; top: 0; right: 0; border: 0; z-index: 1;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub">
    </a>
    <nav class="navbar navbar-default" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand" href="#">{"JSON":{"Path":"Test"}}</a>
            </div>
        </div>
    </nav>
    <div class="row-fluid">
        <div class="span6">
            <h2>Inputs</h2>
            <label>JSONPath Syntax</label>
            <input id="text" class="form-control" type="text" placeholder="Put JSONPath syntax" value="data.phoneNumbers[*].type" />
            <span class="help-block">Example: <span class="label label-default">data.phoneNumbers[1].type</span> Output: <span class="label label-default"> => "Home"</span>
            <br />
            <label>JSON URL</label>
            <form class="margin-bottom" id="JSONValidate" method="post" action="." name="JSONValidate">
                <div class="input-group add-on">
                    <input id="url" class="form-control" type="url" placeholder="Past Your JSON URL Here" value="http://api.icndb.com/jokes/random" />
                    <div class="input-group-btn">
                        <a href="#" class="btn btn-default" type="submit">Get URL</a>
                    </div>
                </div>
                <input type="hidden" id="reformat" value="1" />
                <input type="hidden" id="compress" value="0" />
            </form>
            <label>JSON <span class="label label-success">Paste your JSON data below or paste your JSON URL, Click Validate to validate and test your JSON.</span>
            </label>
            <textarea id="json_input" name="json_input" class="json_input" rows="23" cols="80" wrap="off">
{
    "data": {
        "firstName": "John",
        "lastName": "Doe",
        "age": 26,
        "address": {
            "streetAddress": "Queen Street",
            "city": "Sydney",
            "postalCode": "2000"
        },
        "phoneNumbers": [{
            "type": "Mobile",
            "number": "0404678682"
        }, {
            "type": "Home",
            "number": "0246758223"
        }, {
            "type": "Work",
            "number": "0246752343"
        }]
    }
}
            </textarea>
            <br />
            <div>
                <button name="validate" id="validate" value="Validate" class="button left bold">Validate</button>
            </div>
            <pre id="results">Is your JSON Valid ?</pre>
        </div>
        <div class="span6">
            <h2>Results</h2>
            <label>JSON Output</label>
            <pre class="result">false</pre>
        </div>
        <div class="span6">
            <label>JSONPath Elements</label>
            <div class="jumbotron">
                <table class="table table-striped table-hover">
                    <tr>
                        <td> <strong>XPath</strong> </td>
                        <td> <strong>JSONPath</strong> </td>
                        <td> <strong>Description</strong> </td>
                    </tr>
                    <tr class="info">
                        <td> / </td>
                        <td> $ </td>
                        <td class="lft">the root object/element </td>
                    </tr>
                    <tr>
                        <td> . </td>
                        <td> @ </td>
                        <td class="lft">the current object/element </td>
                    </tr>
                    <tr class="info">
                        <td> / </td>
                        <td> . or [] </td>
                        <td class="lft">child operator </td>
                    </tr>
                    <tr>
                        <td> .. </td>
                        <td> n/a </td>
                        <td class="lft">parent operator </td>
                    </tr>
                    <tr class="info">
                        <td> // </td>
                        <td> .. </td>
                        <td class="lft">recursive descent. JSONPath borrows this syntax from E4X. </td>
                    </tr>
                    <tr>
                        <td> * </td>
                        <td> * </td>
                        <td class="lft">wildcard. All objects/elements regardless their names. </td>
                    </tr>
                    <tr class="info">
                        <td> @ </td>
                        <td> n/a </td>
                        <td class="lft">attribute access. JSON structures don't have attributes. </td>
                    </tr>
                    <tr>
                        <td> [] </td>
                        <td> [] </td>
                        <td class="lft">subscript operator. XPath uses it to iterate over element collections and for <a href="http://www.w3.org/TR/xpath#predicates">predicates</a>. In Javascript and JSON it is the native array operator. </td>
                    </tr>
                    <tr class="info">
                        <td> | </td>
                        <td> [,] </td>
                        <td class="lft">Union operator in XPath results in a combination of node sets. JSONPath allows alternate names or array indices as a set. </td>
                    </tr>
                    <tr>
                        <td> n/a </td>
                        <td> [start:end:step] </td>
                        <td class="lft">array slice operator borrowed from ES4. </td>
                    </tr>
                    <tr class="info">
                        <td> [] </td>
                        <td> ?() </td>
                        <td class="lft">applies a filter (script) expression. </td>
                    </tr>
                    <tr>
                        <td> n/a </td>
                        <td> () </td>
                        <td class="lft">script expression, using the underlying script engine. </td>
                    </tr>
                    <tr class="info">
                        <td> () </td>
                        <td> n/a </td>
                        <td class="lft">grouping in Xpath </td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="footer">
            <font size="1">
               <center>
               Powered by <a href="http://nodejs.org/" target="_blank">Node.js</a> | <a href="https://github.com/arc90/jsonlintdotcom" target="_blank">JsonLint.js</a> | <a href="https://github.com/afeld/jsonp" target="_blank">Jsonp.js</a> | <a href="https://github.com/s3u/JSONPath" target="_blank">JsonPath.js</a> | NodeJsonPathSite By <a href="https://github.com/nrpatten/node-jsonpath-site" target="_blank">NRPatten</a>
               </center>
            </font>
        </div>
    </div>

    <script src="js/jsonp.js" type="text/javascript"></script>
    <script src="js/URI.min.js" type="text/javascript"></script>

    <script type="text/javascript">
        $(document).ready(function() {
            $('#JSONValidate').live('click', function() {
                var getdata = $('#url').val();
                $.jsonp({
                    url: getdata,
                    success: function(data) {
                        $('textarea').val(JSON.stringify(data));
                    }
                });
            });
        });

        var evaluate = function(event, previousText) {
            var query = $('#text').val();
            var json = JSON.parse($('textarea').val().replace(/(\r\n|\n|\r)/gm, ""));
            var result = jsonPath(json, query);
            $('.result').empty();
            if (result) {
                $('.result').append(dump(result));
            }
        };

        $(document).ready(function() {
            $('input').bind('textchange', evaluate);
            $('textarea').bind('textchange', evaluate);
            evaluate();
        });
    </script>

</body>

</html>
